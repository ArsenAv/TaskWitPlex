{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\nexport const booksSlice = createSlice({\n  name: 'booksSlice',\n  initialState: {\n    books: [],\n    currentPage: 1,\n    limit: 3,\n    bookCount: 0,\n    pageCount: 0,\n    comments: [],\n    averageRating: 0,\n    filtrbooks: [],\n    favorites: []\n  },\n  reducers: {\n    updateBooks: (state, action) => {\n      state.books = action.payload;\n    },\n    updateBookCount: (state, action) => {\n      const pageCount = Math.ceil(action.payload / state.limit);\n      state.bookCount = action.payload;\n      state.pageCount = pageCount;\n    },\n    updateCurrentPage: (state, action) => {\n      state.currentPage = action.payload;\n    },\n    updateComments: (state, action) => {\n      state.comments = action.payload;\n    },\n    addComment: (state, action) => {\n      state.comments.push(action.payload);\n    },\n    updateAverageRating: (state, action) => {\n      state.averageRating = action.payload;\n    },\n    filtrbooks: (state, action) => {\n      state.books = action.payload;\n    },\n    updateFavorites: (state, action) => {\n      state.favorite = action.payload;\n    },\n    saveFavorite: (state, action) => {\n      state.favoritebooks.push(action.payload);\n    }\n  }\n});\nexport const getBooksThunk = (currentPage, limit, token) => {\n  return dispatch => {\n    axios.get(`http://localhost:5000/books/?page=${currentPage || 1}&limit=${limit || 3}`, {\n      headers: {\n        authorization: `Bearer ${token}`\n      }\n    }).then(res => {\n      dispatch(updateBooks(res.data));\n    }).catch(error => alert('Error getting books'));\n  };\n};\nexport const getBookCountThunk = token => {\n  return dispatch => {\n    axios.get(`http://localhost:5000/books/bookcount`, {\n      headers: {\n        authorization: `Bearer ${token}`\n      }\n    }).then(res => dispatch(updateBookCount(res.data))).catch(error => alert('Error update count'));\n  };\n};\nexport const getCommentsThunk = (book_id, token) => {\n  return dispatch => {\n    axios.get(`http://localhost:5000/books/comments?book_id=${book_id}`, {\n      headers: {\n        authorization: `Bearer ${token}`\n      }\n    }).then(res => {\n      dispatch(updateComments(res.data));\n    }).catch(error => alert('Error send comments data '));\n  };\n};\nexport const sendCommentThunk = (book_id, mail, text, token) => {\n  return dispatch => {\n    axios.post(`http://localhost:5000/books/comments`, {\n      book_id,\n      mail,\n      text\n    }, {\n      headers: {\n        authorization: `Bearer ${token}`\n      }\n    }).then(res => dispatch(addComment({\n      book_id,\n      mail,\n      text\n    }))).catch(error => alert('Error send comments data '));\n  };\n};\nexport const sendRatingThunk = (book_id, new_rating, token) => {\n  return dispatch => {\n    axios.post(`http://localhost:5000/books/rating`, {\n      book_id,\n      new_rating\n    }, {\n      headers: {\n        authorization: `Bearer ${token}`\n      }\n    }).then(res => {\n      dispatch(updateAverageRating(res.data));\n    }).catch(error => alert('Error send Rating '));\n  };\n};\nexport const getRatingThunk = (book_id, token) => {\n  return dispatch => {\n    axios.get(`http://localhost:5000/books/rating?book_id=${book_id}`, {\n      headers: {\n        authorization: `Bearer ${token}`\n      }\n    }).then(res => {\n      dispatch(updateAverageRating(res.data));\n    }).catch(error => alert('Error send comments data '));\n  };\n};\nexport const getSearchBooks = (filedword, sortvalue, token) => {\n  return dispatch => {\n    axios.get(`http://localhost:5000/books/search?author=${filedword}&sort=${sortvalue}`, {\n      headers: {\n        authorization: `Bearer ${token}`\n      }\n    }).then(res => {\n      dispatch(filtrbooks(res.data));\n    }).catch(error => alert('Error search data '));\n  };\n};\nexport const sendFavoriteThunk = (token, book_id) => {\n  return dispatch => {\n    axios.post(`http://localhost:5000/books/favorites`, {\n      book_id\n    }, {\n      headers: {\n        authorization: `Bearer ${token}`\n      }\n    }).then(res => {\n      dispatch(updateFavorites(res.data));\n    }).catch(error => alert('Error search data '));\n  };\n};\nexport const getFavoritesThunk = token => {\n  return dispatch => {\n    axios.get(`http://localhost:5000/books/favorites`, {\n      headers: {\n        authorization: `Bearer ${token}`\n      }\n    }).then(res => {\n      dispatch(saveFavorite(res.data));\n    }).catch(error => alert('Error search data '));\n  };\n};\nexport const {\n  updateBooks,\n  updateBookCount,\n  updateCurrentPage,\n  addComment,\n  updateComments,\n  addRating,\n  updateAverageRating,\n  filtrbooks,\n  sendFavorite,\n  saveFavorite\n} = booksSlice.actions;\nexport default booksSlice.reducer;","map":{"version":3,"sources":["C:/Users/Arsen/Documents/Myproject/client/src/redux/booksSlice.js"],"names":["createSlice","axios","booksSlice","name","initialState","books","currentPage","limit","bookCount","pageCount","comments","averageRating","filtrbooks","favorites","reducers","updateBooks","state","action","payload","updateBookCount","Math","ceil","updateCurrentPage","updateComments","addComment","push","updateAverageRating","updateFavorites","favorite","saveFavorite","favoritebooks","getBooksThunk","token","dispatch","get","headers","authorization","then","res","data","catch","error","alert","getBookCountThunk","getCommentsThunk","book_id","sendCommentThunk","mail","text","post","sendRatingThunk","new_rating","getRatingThunk","getSearchBooks","filedword","sortvalue","sendFavoriteThunk","getFavoritesThunk","addRating","sendFavorite","actions","reducer"],"mappings":"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","sourcesContent":["import { createSlice } from '@reduxjs/toolkit'\r\nimport axios from 'axios'\r\n\r\nexport const booksSlice = createSlice({\r\n    name: 'booksSlice',\r\n    initialState: {\r\n        books: [],\r\n        currentPage: 1,\r\n        limit: 3,\r\n        bookCount: 0,\r\n        pageCount: 0,\r\n        comments: [],\r\n        averageRating: 0,\r\n        filtrbooks: [],\r\n        favorites: []\r\n    },\r\n    reducers: {\r\n        updateBooks: (state, action) => {\r\n            state.books = action.payload\r\n        },\r\n        updateBookCount: (state, action) => {\r\n            const pageCount = Math.ceil(action.payload / state.limit)\r\n            state.bookCount = action.payload\r\n            state.pageCount = pageCount\r\n        },\r\n        updateCurrentPage: (state, action) => {\r\n            state.currentPage = action.payload\r\n        },\r\n        updateComments: (state, action) =>{\r\n            state.comments = action.payload\r\n        },\r\n        addComment: (state, action) => {\r\n            state.comments.push(action.payload)\r\n        },\r\n        updateAverageRating: (state, action) => {\r\n            state.averageRating = action.payload\r\n        },\r\n        filtrbooks: (state,action) =>{\r\n            state.books = action.payload\r\n        },\r\n        updateFavorites: (state, action) => {\r\n               state.favorite = action.payload\r\n        },\r\n        saveFavorite: (state, action) => {\r\n            state.favoritebooks.push(action.payload)\r\n        }\r\n    }\r\n})\r\n\r\nexport const getBooksThunk = (currentPage, limit, token) => {\r\n     \r\n    return (dispatch) => {\r\n        axios.get(`http://localhost:5000/books/?page=${currentPage || 1}&limit=${limit || 3}`, \r\n                {headers:{authorization: `Bearer ${token}`}})\r\n            .then((res) => {\r\n                dispatch(updateBooks(res.data))\r\n            })\r\n            .catch(error => alert('Error getting books'))\r\n    }\r\n}\r\n\r\nexport const getBookCountThunk = (token) => {\r\n    return (dispatch) => {\r\n        axios.get(`http://localhost:5000/books/bookcount`,{headers:{authorization: `Bearer ${token}`}} )\r\n            .then((res) => dispatch(updateBookCount(res.data)))\r\n            .catch(error => alert('Error update count'))\r\n    }\r\n}\r\n\r\n\r\nexport const getCommentsThunk = (book_id, token) => {\r\n    return (dispatch) => {\r\n        axios.get(`http://localhost:5000/books/comments?book_id=${book_id}`,{headers:{authorization: `Bearer ${token}`}})\r\n        .then((res) => {\r\n            dispatch(updateComments(res.data))\r\n        })\r\n        .catch(error => alert('Error send comments data '))\r\n    }\r\n}\r\nexport const sendCommentThunk = (book_id, mail, text, token) => {\r\n    return (dispatch) => {\r\n        axios.post(`http://localhost:5000/books/comments`, {book_id, mail, text},{headers:{authorization: `Bearer ${token}`}})\r\n        .then((res) => dispatch(addComment({book_id, mail, text})))\r\n        .catch(error => alert('Error send comments data '))\r\n    }\r\n}\r\nexport const sendRatingThunk = (book_id, new_rating, token) => {\r\n    return (dispatch) => {\r\n        axios.post(`http://localhost:5000/books/rating`, {book_id, new_rating}, {headers:{authorization: `Bearer ${token}`}})\r\n        .then((res) => {\r\n            dispatch(updateAverageRating(res.data))\r\n        })\r\n        .catch(error => alert('Error send Rating '))\r\n    }\r\n}\r\nexport const getRatingThunk = (book_id, token) => {\r\n    return (dispatch) => {\r\n        axios.get(`http://localhost:5000/books/rating?book_id=${book_id}`,{headers:{authorization: `Bearer ${token}`}})\r\n        .then((res) => {\r\n            dispatch(updateAverageRating(res.data))\r\n        })\r\n        .catch(error => alert('Error send comments data '))\r\n    }\r\n}\r\nexport const getSearchBooks = (filedword, sortvalue, token) => {\r\n    return (dispatch) => {\r\n        axios.get(`http://localhost:5000/books/search?author=${filedword}&sort=${sortvalue}`,{headers:{authorization: `Bearer ${token}`}})\r\n        .then((res) => {\r\n            dispatch(filtrbooks(res.data))\r\n        })\r\n        .catch(error => alert('Error search data '))\r\n    }\r\n}\r\nexport const sendFavoriteThunk = (token,book_id) => {\r\n    return(dispatch) => {\r\n        axios.post(`http://localhost:5000/books/favorites`,{book_id},{headers:{authorization: `Bearer ${token}`}})\r\n        .then((res) => {\r\n            dispatch(updateFavorites(res.data))\r\n        })\r\n        .catch(error => alert('Error search data '))\r\n    }\r\n}\r\nexport const getFavoritesThunk = (token) => {\r\n    return(dispatch) => {\r\n        \r\n        axios.get(`http://localhost:5000/books/favorites`,{headers:{authorization: `Bearer ${token}`}})\r\n        .then((res) => {\r\n            dispatch(saveFavorite(res.data))\r\n        })\r\n        .catch(error => alert('Error search data '))\r\n    }\r\n}\r\n\r\n\r\n\r\nexport const { updateBooks, updateBookCount, updateCurrentPage, addComment, updateComments, addRating, updateAverageRating, filtrbooks,sendFavorite,saveFavorite} = booksSlice.actions\r\nexport default booksSlice.reducer"]},"metadata":{},"sourceType":"module"}